
==== Front
Sensors (Basel)
Sensors (Basel)
sensors
Sensors (Basel, Switzerland)
1424-8220
MDPI

10.3390/s24113368
sensors-24-03368
Article
Self-Tuning of Signal Detection Level for Energy Detection-Based Carrier Sense in Low-Power Wide-Area Networks
https://orcid.org/0000-0003-2398-9977
Narieda Shusuke Conceptualization Methodology Software Validation Formal analysis Investigation Resources Data curation Writing – original draft Writing – review & editing Visualization Supervision Project administration Funding acquisition 1*
https://orcid.org/0000-0002-7886-5560
Fujii Takeo Conceptualization Methodology Software Validation Formal analysis Investigation Resources Data curation Writing – original draft Writing – review & editing Visualization Supervision Project administration Funding acquisition 2
Gomez Carles Academic Editor
1 Graduate School of Engineering, Mie University, Tsu 514-8507, Mie, Japan
2 Advanced Wireless and Communication Research Center (AWCC), The University of Electro-Communications, Chofu 182-8585, Tokyo, Japan; fujii@awcc.uec.ac.jp
* Correspondence: narieda@pa.info.mie-u.ac.jp
24 5 2024
6 2024
24 11 336817 4 2024
15 5 2024
18 5 2024
© 2024 by the authors.
2024
https://creativecommons.org/licenses/by/4.0/ Licensee MDPI, Basel, Switzerland. This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC BY) license (https://creativecommons.org/licenses/by/4.0/).
Carrier sense allows end devices to improve the communication quality through autonomous decentralization by consuming power. In particular, energy detection-based carrier sense can improve communication quality compared with peak detection-based carrier sense. To improve the trade-off between communication quality and energy consumption in low-power wide-area networks (LPWANs), this study proposes a self-tuning method for the signal detection level of an energy detection-based carrier sense, that is, the carrier sense level in sub-GHz band LPWANs. In the proposed method, the carrier sense level of each end device is determined based on the reception success probability of the acknowledgment packet, such that they become low carrier sense levels for an end device with low probability and high carrier sense levels for an end device with high probability. The proposed method enables autonomous decentralized derivation of the carrier sense level using only existing protocols. Numerical examples show that the proposed method can improve the performance of end devices with a high path loss to a gateway.

carrier sense
energy detection
low-power wide-area networks
MIC/SCOPE#JP215006001 JSPS KAKENHI19K04374 This research and development work was supported by the MIC/SCOPE #JP215006001 and JSPS KAKENHI 19K04374.
==== Body
pmc1. Introduction

The Internet of Things (IoT) is a structure that enables information interchange between an extremely large number of various things with physical sensors via wireless networks. Several pieces of information can be extracted by connecting things to the network, and they can be analyzed on the Internet cloud and shared, regardless of location. Through this process, the value of information obtained from various sources increases, and this may provide a solution to various social problems. Several systems that use this structure, such as industrial applications [1,2] and smart cities [3], have been developed and investigated.

The low-power wide-area network (LPWAN) [4] is one of the candidates for wireless infrastructures of such IoT systems owing to their characteristics. LPWA communications are characterized as energy-efficient wireless and long-range communications, although the data rate of the communication is very low. Furthermore, employing LPWANs does not inhibit the rapid spread of IoT systems because a private or local network can be constructed using LPWAN in unlicensed bands; for example, 920 MHz bands are utilized for LPWA communications in Japan. The characteristics of LPWANs are suitable for IoT systems with an extremely large number of battery-driven end devices. However, the frequency band may be under strain, leading to the degradation of the communication quality in the frequency band.

Carrier sense [5,6], which is employed in IEEE 802.11 [7] based on wireless local area networks, is a powerful technology that enables the improvement in the communication quality even in an environment in which a significant number of wireless transceivers are transmitting and receiving their packets. It is well known that carrier sense technologies attempt to detect communication signals from other end devices in the channel as transmitted packets. If signals from other end devices are not detected, the end device transmits packets immediately; if the signals are detected, after waiting for a while, the system checks again with the carrier sense whether the channel is idle. Carrier sense utilizes a signal detection technology [8] to detect the communication signals, such as peak detection, energy detection [9], or cyclostationary detection [10]. Peak detection is the simplest signal detection technique that determines the presence or absence of the target signals whether the peak power of the received signals within a signal detection period exceeds a threshold value. For example, the carrier sense level in the Japanese 920 MHz band is defined as the peak power of received signals to avoid interference to co-existing passive tag systems, and peak detection can be detected at the carrier sense level. In ARIB STD-T108 [11], which is a regulation for 920 MHz LPWANs in Japan, packet transmission from the end device is strictly limited by several wireless parameters, namely the transmission power, duty-cycle and transmission time for one packet. However, the purpose of these methods is solely to protect co-existing systems, and the peak detection-based carrier sense cannot improve the performance of the end devices well due to the low accuracy of signal detection owing to the noise floor, especially in LPWANs, where the sensitivity is lower than that of the noise floor.

There is very little research on carrier sense in LPWANs, which have various wireless parameters, such as communication protocols, bandwidth, noise floor levels, and sensitivity, that are completely different from wireless LANs. This is because only a few countries require carrier sense for LPWA communication, and one of them is Japan. In this situation, to overcome this problem and improve communication quality, carrier sense technologies based on energy detection for LPWANs have been investigated [12]. Energy detection is a signal detection technique that determines the presence or absence of target signals whether the average power of the received signals within the signal detection period exceeds a threshold value. The accuracy of energy detection is superior to that of peak detection. When energy detection is applied to carrier sense, the target signals do not occupy the carrier sense period due to the short packets in LPWANs, and the characteristics differ from those of the general signal detection problem, that is, under the assumption that the length of the target signal is infinite. In [12], several characteristics of these cases are investigated both theoretically and numerically. However, in the energy detection-based carrier sense, the signal detection level of the carrier sense, that is, carrier sense level, depends on the carrier sense period, which determines the energy consumption for carrier sense at the end device. Therefore, it is important to discuss the trade-off between the accuracy of the carrier sense and energy efficiency [13,14].

In this study, we discuss a simple method for determining the signal detection level of the energy detection-based carrier sense, including whether the carrier sense is executed or not. To consider the trade-off between the accuracy of the carrier sense and energy efficiency, the optimization of the carrier sense level can be considered under the constraint of the energy consumed in the entire network. However, the optimization problem for the entire network is unrealistic because new protocols are required to distribute the optimization results computed at the gateway. Therefore, autonomous decentralized determination is expected at each end device. We propose a self-tuning method of the carrier sense level for the energy detection-based carrier sense in the Sub-GHz band LPWANs.

The remainder of this paper is organized as follows. Section 2 presents related works of the proposed self-tuning method and the original contribution of this paper. In Section 3, we define LPWAN system models and present the energy detection-based carrier sense. Section 4 presents the proposed self-tuning method for autonomously determining the signal detection level of the energy detection-based carrier sense. Section 5 presents the numerical analysis results of LPWAN with the energy detection-based carrier sense. Finally, Section 6 presents the conclusions of this study.

2. Related Works and Original Contribution

2.1. Related Works

Autonomous decentralized processing methods for the LPWA end devices have been previously proposed [15,16,17,18]. An efficient mechanism for autonomous slot assignment based on time-slotted long-range wide-area networks (LoRaWANs) has been proposed [15,16]. In [17], an autonomous adaptive frame size protocol for LoRa has been proposed. Furthermore, medium access control protocol to determine transmission parameters for the end devices based on their location to the gateway has been proposed [18]. On the other hand, for example, LoRaWAN has an adaptive data rate (ADR) [19], which controls the data rate of the end devices according to the communication environment. ADR enables the autonomous decentralized control at the end devices in LoRaWAN, and several methods of performance improvement based on ADR have been proposed [20,21,22].

All of these related show that some specialized communication protocols are required. Therefore, these protocols cannot directly adopt another LPWA communication scheme, such as wireless smart utility networks (Wi-SUNs). The proposed method can adopt several LPWA communications as long as these have the acknowledgment mechanism.

2.2. Original Contribution

The main contribution of this paper can be summarized as follows:We propose a simple self-tuning method for the carrier sense level for the energy detection-based carrier sense in the Sub-GHz band of the LPWAN. The proposed method can autonomously determine the carrier sense level of each end device.

Unlike these works shown in the previous subsection, we employ acknowledgment (ACK) protocols, which are already implemented in most LPWA communications, in LPWANs for the proposed self-tuning method. For example, all end devices for LoRaWANs must implement Class A, which specifies ACK packets [19], while Wi-SUN equips the ACK frame [23]. The signal detection level of the energy detection-based carrier sense determines whether the reception of ACK packets is successful or not. By employing ACK protocols, the autonomous decentralized determinations of the carrier sense level can be realized for each end device. Therefore, the proposed method is applicable to all LPWA schemes with the ACK mechanism, and this is an advantage of the proposed method.

Numerical examples show that the proposed method can solve the trade-off between the accuracy of the carrier sense and energy efficiency under the given target packet delivery ratio.

3. Preliminary Notion

3.1. LPWAN

In this study, a simple LPWAN model composed of geographically fixed K end devices and one gateway located at the center of the communication area with a radius R m is investigated. The LPWAN is a fundamentally pure ALOHA-based wireless network with the energy detection-based carrier sense. However, ACK packets are transmitted and received, as necessary. All end devices transmit packets conveyed to each observed data point every TTX s after the carrier sense to confirm the channel usage of other end devices. The end device executes the carrier sense NSC times at random intervals and does not transmit the packet if it cannot confirm that the channel is idle. We employ a simple radio propagation model in which the received signal power PRX,k from the kth end device at the gateway is determined only by the transmission power PTX,k as follows:(1) PRX,k=PTX,k−Lk,k=1,⋯,K,

where Lk is the path loss between the gateway and kth end device in decibels, which decays exponentially with distance as (2) Lk=−10log10dkαGEfc2×10−2.8,k=1,⋯,K,

where dk m, αGE, and fc MHz are the distances between the gateway and kth end device, path loss exponent between the gateway and kth end device, and carrier frequency, respectively. Furthermore, we employ a path loss model Θk,i between the kth and ith end devices, as follows:(3) Θk,i=−10log10dk,iαGE¯fc2×10−2.8,k≠i,k,i=1,⋯,K,

where dk,i¯ and αGE are the distance between the kth and ith end devices and the path loss exponent between the kth and ith end devices, respectively.

We divide the operation of the end devices into three parts: packet transmission, carrier sense, and sleep. We assume that the operation of the end device is sleep except for packet transmission and carrier sense. Based on these operations, the current consumption of the end device is presented to evaluate the performance of the proposed method. Table 1 lists the current consumption of the end devices for each operation. These values listed in Table 1 are obtained by using the LoRa calculator [24]. In Table 1, we assume that the current consumption of the carrier sense is almost the same as that of packet reception, as described in [25].

3.2. Energy Detection-Based Carrier Sense in LPWANs

In this subsection, the energy detection-based carrier sense in LPWANs is presented. We let TP and TCS denote the length of the packet and the carrier sense period, respectively. Note that this will occur not only for TP≤TCS, but also for TP>TCS because the presence of the interference packet is unknown during the carrier sense period. Considering these factors, the carrier sense success probability PCS of the energy detection-based carrier sense can be written as [12] (4) PCS=1TP+TCS2∑n=1minTP,TCSPD,A(n)+|TP−TCS|+1PD,AminTP,TCS,

where minX,Y is a function that yields the minimum values of X and Y. In addition, PD,An is the signal detection probability for a finite length target signal n. The signal detection probability for a finite packet length TP is given by (5) PD,ATP=QPCSmWσv2+min1,TPTCSσw2−12TCSBW,

where σv2, σw2, and PCSmW are the variances in noise at the end device, arriving interference, and the threshold for signal detection in milliwatts, respectively. Furthermore, Q(z)=12∫z∞e−t2/2dt [26].

Inaccurate noise power estimation degrades the accuracy of the energy detection-based carrier sense due to the signal power to noise ratio (SNR) wall phenomenon [27]. To avoid this, a sufficiently long carrier sense period is required [28]. The carrier sense period TCS can also be written, resulting in the derivation of the signal detection theorem [12], as follows:(6) TCS=12γ2BWQ−1PFA¯−1+γQ−1PD¯2

where γ=σw2/σv2, PD¯, and PFA¯ are the SNR, target signal detection probability, and target false alarm probability, respectively. Note that γ can also be interpreted as the SNR computed from the carrier sense level as a signal power and the noise floor. Figure 1 shows the relationship between the carrier sense level and the carrier sense period. In Figure 1, the channel bandwidth, noise figure, target signal detection probability, and target false alarm probability are 200 kHz, 6 dB, 0.99, and 0.01, respectively. As shown in Figure 1, it can be seen that the carrier sense period increases as the carrier sense level decreases. Due to the fact that the current consumption of the carrier sense can be assumed to be that of packet reception [25], this implies that a lower carrier sense level leads to higher current consumption. If the carrier sense level can be appropriately determined at each end device, neither too high nor too low, it is possible to reduce the extra current consumption at the end device. To achieve this, we propose the self-tuning method of carrier sense level for the energy detection-based carrier sense in the next section.

4. Self-Tuning Method of Signal Detection Level for Energy Detection-Based Carrier Sense

4.1. Overview of Proposed Method

The proposed self-tuning method enables the autonomous decentralization determination of the carrier sense level at each end device. To achieve this, the proposed method determines whether the ACK packet transmission is successful. A significant number of LPWA communication schemes equip the protocols of corresponding ACK packets.

The proposed self-tuning method can exploit the existing protocols; therefore, it is not necessary to develop new protocols for optimization. In the proposed self-tuning method, first, each end device is autonomously decentralized and determines the carrier sense level based on the ACK packet delivery ratio during a certain period. The period for the determination of the carrier sense level is called the self-tuning period with LP length. After this self-tuning period, ACK packets are used if necessary, according to the original purpose of the network. In this study, an application without ACK packets is assumed, that is, ACK packets are not used after the self-tuning period, to focus on the proposed method. In the next subsection, the self-tuning method for the determination of the carrier sense level is presented.

4.2. Self-Tuning Method for Determination of Carrier Sense Level

We assume that each end device has memory for maintaining the ACK reception results with LM length, and the nth result at the kth end device is stored as rkn with a value of 1 or 0. One rkn is used for the packet conveying the same data; that is, rkj will be 0 even if the packet cannot be transmitted due to carrier sense. After generating LM packets, the estimated nth packet delivery ratio at the kth end device P^PDR,kn, which can be sequentially computed using the results stored in memory, can be written as (7) P^PDR,kn=∑j=n−LM+1nrkjLM,k=1,⋯K.

The proposed self-tuning method enables the autonomous decentralized determination of the carrier sense at the end devices by sequentially computing Equation (7). We let PPDR¯ denote target packet delivery ratio. In the proposed self-tuning method, the carrier sense level decreases if P^PDR,kn<PPDR¯, whereas it increases if P^PDR,kn≥PPDR¯. Furthermore, to reduce the current consumption at the end device, the end device does not execute the carrier sense if P^PDR,kn > PPDR¯ and the carrier sense level exceeds the upper bound of the variable range of the carrier sense level.

Thus, the carrier sense level at the kth end device PCS,kdBmn depends on P^PDR,kn and PPDR¯. The decision-making process of the carrier sense level can be divided into two cases, that is, P^PDR,kn≥PPDR¯ and P^PDR,kn<PPDR¯, as shown below.

4.2.1. Case: P^PDR,kn≥PPDR¯

In this case, which represents rich communication quality at the kth end device, the carrier sense level is raised or the end device does not execute the carrier sense to reduce energy consumption. These processes can be written as (8) PCS,kdBmn=PCS,kdBmn−1+XdB,PCS,kdBmn−1<PCS,UBdBm∞,PCS,kdBmn−1≥PCS,UBdBm,k=1,⋯K

where XdB and PCS,UBdBm are the step sizes of the carrier sense level in decibels and the upper bound of the variable range of the carrier sense level in the proposed method, respectively. Note that PCS,kdBmn=∞ indicates that the end device does not execute the carrier sense.

4.2.2. Case: P^PDR,kn<PPDR¯

In this case, which represents poor communication quality at the kth end device, the carrier sense level is lowered or the end device executes the carrier sense. These can be written as (9) PCS,kdBmn=PCS,kdBmn−1−XdB,∞>PCS,kdBmn−1>PCS,LBdBmPCS,UBdBm,PCS,kdBmn−1=∞PCS,LBdBm,PCS,kdBmn−1≤PCS,LBdBm,k=1,⋯K

where PCS,LBdBm is the lower bound of the variable range of the carrier sense level in the proposed method. Note that the second line of the right-hand term in Equation (9) indicates that the end devices that have not previously executed the carrier sense will do so.

These are summarized in Algorithm 1. In Algorithm 1, the proposed self-tuning algorithm is started after the ACK reception results have been accumulated for the memory length of LM. Furthermore, the initial value of the carrier sense level is ∞, that is, all the end devices do not execute the energy detection-based carrier sense in the initial state. This means that each end device will execute the carrier sense if necessary. Algorithm 1 Self-tuning algorithm at kth end device	
1: n←1

2: end of LM ACK results accumulation, i.e., n←LM

3: PCS,kdBmLM←∞

4: for all n←LM+1 to LM+LP do

5:  end of nth packet transmission

6:  calculate P^PDR,kn using Equation (7)

7:  if P^PDR,kn≥PPDR¯  then

8:     calculate PCS,kdBmn using Equation (8)

9:   else if P^PDR,kn<PPDR¯  then

10:   calculate PCS,kdBmn using Equation (9)

11:  end if

12: end for

	

It is important to determine PCS,LBdBm for efficient energy consumption at the end device. The energy detection-based carrier sense has an optimal carrier sense level where the best communication quality is obtained, and its characteristic has one peak at the optimal carrier sense level (the characteristics described below). Lowering the carrier sense level extends the carrier sense period, resulting in a carrier sense level below the optimal level of waste power of the end device. We let PCS,OPTdBm denote the optimal carrier sense level in the network and define PCS,LBdBm as PCS,OPTdBm.

The performances of the end devices with high path loss between the gateway and end devices, that is, poor conditioned end devices, are inferior to those of the rich conditioned end devices owing to the capture effect. In [29], the performance of the poor conditioned end devices can be improved by executing the energy detection-based carrier sense at the poor end devices in LPWANs because it can reduce the number of interferences for the end device executing the carrier sense. In the proposed self-tuning method, the carrier sense level of the end devices with high path loss to the gateway, that is, poor conditioned end devices, may be lower, whereas the carrier sense level of the end devices with low path loss to the gateway, that is, rich conditioned end devices, may be higher. Thus, the proposed method lowers the carrier sense level of the poor conditioned end devices to improve the performance.

5. Numerical Examples

5.1. Parameter Setup

In this section, we show numerical examples to validate the effectiveness of the proposed self-tuning method. Table 2 lists the parameters of the numerical examples shown in this section. Numerical examples are obtained through computer simulations using MATLAB. In these simulations, K=200 end devices are deployed in the communication area with a radius R=1500 m. Assuming a suburban environment, we employ the path loss exponents between the end devices and gateway and between each end device as αGE=2.7 and αEE=3.3, respectively [30]. Note that these αGE and αEE are obtained as measurement results of radiowave propagation for smart metering in the suburban 950 MHz band, which is used before the 920 MHz band in Japan. We employ LoRa signals as the LPWA signals. Each end device transmits data via LoRa packets with a transmit power, length of packet, and spreading factor of 13 dBm, 153.9 ms, and 7, respectively. Note that the transmit power 13 dBm is defined as the maximum transmit power in the Japanese 920 MHz band [11] and the length of the LoRa packets follows the standard of LoRa Alliance [19], which is equivalent to conveying a payload of 50 bytes. The carrier frequency, noise figure at the receiver, and number of channels used are 920 MHz, 6 dB, and 1, respectively. Figure 2 shows the characteristics of the LPWAN with the energy detection-based carrier sense versus the packet delivery ratio based on the parameters listed in Table 2. As shown in Figure 2, it can be seen that the optimal carrier sense level that maximizes the packet delivery ratio is approximately −129 dBm. Therefore, we employ the lower bound of the variable range of the carrier sense level PCS,LBdBm=−129 dBm for the numerical examples shown in this section. Note that the details of the characteristics shown in Figure 2 are described in [12]. Furthermore, the upper bound of the variable range of the carrier sense level PCS,UBdBm is −110 dBm. For the self-tuning, each end device equips memory for ACK results with length 128. The self-tuning is executed during the reception of 256 ACK packets at the end device. During the self-tuning period, the gateway transmits ACK via LoRa packets with a transmit power, length of ACK, and spreading factor of 13 dBm, 51.5 ms, and 7, respectively. Note that the length of the LoRa packets also follows the standard of LoRa Alliance [19], which is equivalent to conveying a payload of 1 bytes. The carrier sense level of the gateway is −129 dBm. For the signal detection parameters, the target signal detection probability and the target false alarm probability are 0.99 and 0.01, respectively. We employ the current consumption model for each operation of end devices as listed in Table 1. Figure 3 shows the SIR–SNR relationship which determines the packet transmission success. In Figure 3, the upper-region delimited by a curve represents the packet transmission success, whereas the lower-region delimited by a curve represents the packet transmission failure. The relationship is employed to determine whether the packet transmission is successful in the computer simulation.

5.2. Fundamental Characteristics of Self-Tuning Method

In this subsection, several fundamental characteristics of the proposed self-tuning method are presented. First, we present the characteristics of the length of memory for ACK results LM. Figure 4 shows the characteristics of the length of memory for ACK results versus the packet delivery ratio under PPDR¯=0.95. In Figure 4, three curves are depicted: 10% of the poor conditioned end devices, 10% of the rich conditioned end devices, and the remaining end devices. As shown in Figure 4, packet delivery ratios deteriorate when the length of memory exceeds 19. The reason for this is that it is insufficient a convergence for the self-tuning at the end devices, especially the 10% rich end devices. This is also shown in Figure 5. Furthermore, it can be seen that LM requires a certain length that is greater than 100.

Next, we present the characteristics of carrier sense level convergence using the proposed method. Figure 5 shows the convergence characteristics of the carrier sense level during the self-tuning periods. In Figure 5, the three types of curves are depicted as in Figure 4, and these curves correspond to LM=16, 24, 64. Note that the self-tuning period, that is, the required number of ACKs, is twice as large as LM. It can be seen that the carrier sense levels have not converged for LM=16 and 24, whereas the carrier sense levels have converged for LM=64. Furthermore, it can be seen that Figure 5 can explain Figure 4. Figure 6 shows the convergence characteristics of the carrier sense levels during the self-tuning periods for LM=128. In Figure 6, the three types of curves are depicted as in Figure 4, and these curves correspond to PPDR¯=0.85, 0.9, and 0.95. As shown in Figure 4, the carrier sense levels for the end devices converge, except for the 10% of end devices in the rich environments. This is because almost all end devices in the rich environments do not require the carrier sense owing to the capture effect. Furthermore, the curve of the 10% rich condition for PPDR¯=0.85 represents that the energy detection-based carrier sense at the end devices is deemed unnecessary as soon as the iteration is less than 30.

To clarify these findings, Figure 7a,b show the carrier sense levels after the self-tuning period and packet delivery ratio based on the carrier sense levels for PPDR¯=0.85, NED=200, and R=1500 m, respectively. In both figures, the carrier sense levels and packet delivery ratio are depicted in the end device placement using color maps, respectively. Note that these Figure 7a,b are obtained by 10 computer simulation trials, and the end devices with no carrier sense are depicted by white circles with red lines in Figure 7a. As shown in Figure 7a,b, it can be seen that the performances of the centrally located end devices near the gateway are superior to other end devices, especially for the end devices near the outer perimeter of the communication area. However, the centrally located end devices do not execute the carrier sense. This indicates that the end devices in the rich environment do not execute the carrier sense by employing the proposed self-tuning method, which leads to the efficient energy consumption of such end devices. For the end devices with the carrier sense, it can be seen that the carrier sense levels of almost all end devices are the same at PCS,LBdBm=−129 dBm. Figure 7c,d show the carrier sense levels and packet delivery ratios for PPDR¯=0.9, respectively. It can be seen that the number of end devices with no carrier sense shown in Figure 7c is less than that shown in Figure 7a, and in conjunction with this finding, the performances of the packet delivery ratio in Figure 7d are superior to those shown in Figure 7b. This is because the poor conditioned end devices are included in the carrier sense range of other end devices, thereby reducing the number of interferences for the poor conditioned end devices [29]. Furthermore, Figure 7e,f show the performances for PPDR¯=0.95. A tendency similar to that shown in Figure 7a–d can be seen.

Next, Figure 8a,b show the carrier sense levels after the self-tuning period and packet delivery ratio based on the carrier sense levels for PPDR¯=0.95, NED=100, and R=1500 m, respectively. In both figures, similar to Figure 7a–f, the carrier sense levels and packet delivery ratio are depicted in the end device placement using color maps, respectively. As shown in Figure 8a, the area, where the end devices that execute the carrier sense are present, is smaller than that shown in Figure 7e. This is because the decrease in NED leads to a decrease in the number of interferences, resulting in a decrease in the number of the end devices that execute the carrier sense. On the other hand, Figure 8c–f show the carrier sense levels after the self-tuning period and packet delivery ratio for PPDR¯=0.95 and NED=400, 800, respectively. As shown in Figure 8c,e, the area, where the end devices that execute the carrier sense are present, is larger than that shown in Figure 7e, owing to the increase in the number of interferences. Furthermore, as shown in Figure 7f and Figure 8b,d,f, the packet delivery ratio of the poor conditioned end devices is deteriorated as NED increases.

Finally, Figure 9a–d show the carrier sense levels after the self-tuning period and packet delivery ratio based on the carrier sense levels for R=1000 m and R=2000 m, respectively. Note that the results are obtained under PPDR¯=0.95 and NED=200. As shown in Figure 7e and Figure 9a,c, the areas, where the end devices that execute the carrier sense are present, in the three figures are almost the same. This is because the relationship itself between the received signal power from the end devices does not depend on the radius of the communication area. On the other hand, as shown in Figure 7f and Figure 9b,d, the performances of the packet delivery ratio are deteriorated as the radius R increases. This is because the number of end devices outside the carrier sense range, that is, hidden terminals, increases as the radius R increases.

5.3. Characteristics of Proposed Self-Tuning Method for Channel Changing Owing to Some Factors

In this subsection, we show the evaluation results of the proposed self-tuning method for channel characteristics that have changed owing to some factor. We let σC denote a standard deviation of channel changing. Using σC, the changed path loss Lk˜ between the gateway and kth end device in decibels is defined as follows. (10) Lk˜=Lk+x,k=1,⋯,K,

where x is a random variable which follows Gaussian distribution with zero mean and standard deviation σC in decibels. Similarly, the changed path loss Θk,i˜ between kth and ith end devices in decibels can be defined as follows:(11) Θk,i˜=Θk,i+x,k≠i,k,i=1,⋯,K.

Using Lk˜ and Θk,i˜, the characteristics of the proposed self-tuning method for the channel changing are evaluated. The evaluations are carried out under PPDR¯=0.95, NED=200, R=1500 m, and σC=7.5 dB. Figure 10a,b show the carrier sense levels before channel changing and after channel changing, respectively. Note that the carrier sense levels in Figure 10a,b are obtained by the proposed method for the channel before and after changing, respectively. As shown in both figures, the carrier sense levels in Figure 10b are changed compared to those in Figure 10a. Figure 10c,d show the packet delivery ratios. Figure 10c shows the packet delivery ratios when tracking the channel changing, whereas Figure 10d shows those without tracking the channel changing. It can be seen that the characteristics in Figure 10c are superior to those in Figure 10d. Furthermore, Figure 10e shows the packet delivery ratio for the channel before changing with the carrier sense levels shown in Figure 10a. Note that, although Figure 7f and Figure 10e are fundamentally the same, the values in both figures allocated to the color map are only different for the comparison. As shown in Figure 10c,e, both characteristics are almost the same. This indicates that the proposed self-tuning method can track the channel changing by periodically tuning the carrier sense level.

5.4. Characteristics of Self-Tuning Method Regarding Energy Consumption

Figure 11 shows the characteristics of the target packet delivery ratio PPDR¯ versus the packet delivery ratio. In Figure 11, the characteristics of the three types of end devices in the three types of networks, that is, the networks with self-tuning, with the energy detection-based carrier sense, and without any carrier sense method. For the characteristics of the network with the energy detection-based carrier sense, the carrier sense level of all the end devices is −129 dBm. As shown in Figure 11, the performance of the end devices with the proposed self-tuning approaches those obtained with the carrier sense. Furthermore, Figure 12 shows the characteristics of the target packet delivery ratio versus the average carrier sense level. It can be seen that the carrier sense level decreases as the target packet delivery ratio increases. Furthermore, it can be seen that the rich conditioned end devices do not execute the carrier sense when PPDR¯<0.89.

Figure 13a shows the characteristics of the target packet delivery ratio versus the average current consumption. Note that the analytical results for current consumption shown in this subsection are based on Table 1. It can be seen the current consumption of 10% for the poor conditioned end devices using the proposed self-tuning method is almost the same as that of the end devices with the carrier sense for a high target packet delivery ratio. However, the consumption of the remaining 90% of end devices, especially the 10% rich conditioned end devices, is less than that of the end devices with the carrier sense. To show the details of the current consumption, Figure 13b–d show the characteristics of the average current consumption for packet transmission, carrier sense, and sleep, respectively. Note that the legends of Figure 13b–d are identical to those in Figure 13a. As shown in Figure 13c, the average current consumption of the end devices with the proposed method is less than that of the end devices with the energy detection-based carrier sense, whereas the average current consumption of the end devices with the proposed method in Figure 13b,d is almost the same as that of the end devices with the energy detection-based carrier sense. Especially, it can be seen that the current consumption of the poor conditioned end devices is greater than the other end devices, whereas the consumption of the rich conditioned end devices is less than the other end devices. Hence, the end devices’ performances to be improved, that is, the poor conditioned end devices, require a large amount of energy when adopting the proposed self-tuning method. Furthermore, the proposed self-tuning method does not consume much energy of the end devices whose performance does not need to be improved, that is, the rich conditioned end devices. To show these clearly, Figure 14 shows the trade-off in the proposed self-tuning method between the average current consumption and packet delivery ratio. In Figure 14, the relationship between the average current consumption and packet delivery ratio are depicted for different PPDR¯s. It can be seen that these are rather straightforward and obvious.

6. Conclusions

In this study, we proposed the self-tuning method of the signal detection level of the energy detection-based carrier sense. The proposed self-tuning method enables the autonomous decentralized determination of the carrier sense level at each end device. To achieve this, the proposed method was utilized whether ACK packet transmissions were successful or not. The proposed self-tuning method does not require the development of new protocols. The numerical examples demonstrated that the proposed self-tuning method can improve the performance of the end devices whose performance is to be improved. Furthermore, the proposed self-tuning method leads to rather straightforward and obvious results according to which the end devices whose performance does not need to be improved do not consume much energy, that is, the rich conditioned end devices by employing the proposed self-tuning method.

The future work involves the investigation of a self-tuning method of transmit power at each end device and the development of a hybrid self-tuning method of transmit power and signal detection level of the energy detection-based carrier sense.

Author Contributions

Conceptualization, S.N.; methodology, S.N.; software, S.N.; validation, S.N.; formal analysis, S.N.; investigation, S.N.; resources, S.N.; data curation, S.N.; writing—original draft preparation, S.N. and T.F.; writing—review and editing, S.N. and T.F.; visualization, S.N.; supervision, S.N.; project administration, S.N.; funding acquisition, S.N. All authors have read and agreed to the published version of the manuscript.

Data Availability Statement

The original contributions presented in the study are included in the article, further inquiries can be directed to the corresponding author.

Conflicts of Interest

The authors declare no conflicts of interest.

Figure 1 Relationship between carrier sense level and carrier sense period.

Figure 2 Characteristics of carrier sense levels versus packet delivery ratio.

Figure 3 SIR-SNR relationship which determines the packet transmission success.

Figure 4 Length of memory for ACK results versus packet delivery ratio. PPDR¯=0.95.

Figure 5 Convergence of carrier sense level. LM=16, 24, 64 and PPDR¯=0.95.

Figure 6 Convergence of carrier sense level. PPDR¯=0.85, 0.9, 0.95 and LM=128.

Figure 7 Carrier sense levels and packet delivery ratio for each end device. NED=200 and R=1500 m. (a) Carrier sense levels. PPDR¯=0.85; (b) Packet delivery ratios. PPDR¯=0.85; (c) Carrier sense levels. PPDR¯=0.9; (d) Packet delivery ratios. PPDR¯=0.9; (e) Carrier sense levels. PPDR¯=0.95; (f) Packet delivery ratios. PPDR¯=0.95.

Figure 8 Carrier sense levels and packet delivery ratio for each end device. PPDR¯=0.95 and R=1500 m. (a) Carrier sense levels. NED=100; (b) Packet delivery ratios. NED=100; (c) Carrier sense levels. NED=400; (d) Packet delivery ratios. NED=400; (e) Carrier sense levels. NED=800; (f) Packet delivery ratios. NED=800.

Figure 9 Carrier sense levels and packet delivery ratio for each end device. PPDR¯=0.95 and NED=200. (a) Carrier sense levels. R=1000 m; (b) Packet delivery ratios. R=1000 m; (c) Carrier sense levels. R=2000 m; (d) Packet delivery ratios. R=2000 m.

Figure 10 Carrier sense levels and packet delivery ratios for each end device. PPDR¯=0.95, NED=200, R=1500 m, and σC=7.5 dB. (a) Carrier sense levels before changing; (b) Carrier sense levels after changing; (c) Packet delivery ratios with tracking; (d) Packet delivery ratios without tracking; (e) Packet delivery ratios before changing.

Figure 11 Characteristics of target packet delivery ratio versus packet delivery ratio.

Figure 12 Characteristics of target packet delivery ratio versus average carrier sense level.

Figure 13 Characteristics of target packet delivery ratio versus average current consumption for each operation. (a) All operations; (b) Packet transmission; (c) Carrier sense; (d) Sleep.

Figure 14 Trade-off in proposed self-tuning method between average current consumption and packet delivery ratio for different PPDR¯s.

sensors-24-03368-t001_Table 1 Table 1 Current consumption of end devices for each operation.

Parameter	Value	
Packet transmission	35 mA	
Carrier sense	10.8 mA	
Sleep	100 nA	

sensors-24-03368-t002_Table 2 Table 2 Parameters for numerical examples of LPWANs.

Parameter	Variable	Value	
Number of end devices	NED	200	
Radius of communication areas	R	1500 m	
Path loss exponent	αGE	2.7 (suburban)	
(end device–gateway)			
Path loss exponent	αEE	3.3 (suburban)	
(end device–end device)			
Transmit power at end device	PTX	13 dBm	
Average transmission period	TTX	300 s	
(Poisson distribution)			
Length of packet		153.9 ms	
Spreading factor (end devices)		7	
Maximum carrier sense time		3	
Carrier frequency	fc	920 MHz	
Noise figure at receiver	NF	6 dB	
Number of channels used	−	1	
Lower bound of carrier sense level	PCS,LBdBm	−129 dBm	
Upper bound of carrier sense level	PCS,UBdBm	−110 dBm	
Length of memory for ACK result	LM	128	
Length of self-tuning period	LP	256 ACKs	
Transmit power at gateway	−	13 dBm	
Length of ACK	−	51.5 ms	
Spreading factor (gateway)		7	
Carrier sense level at gateway	−	−129 dBm	
Target signal detection probability	PD¯	0.99	
Target false alarm probability	PFA¯	0.01	
Current consumption of end devices	−	Table 1	
Capture effect	−	Figure 3	

Disclaimer/Publisher’s Note: The statements, opinions and data contained in all publications are solely those of the individual author(s) and contributor(s) and not of MDPI and/or the editor(s). MDPI and/or the editor(s) disclaim responsibility for any injury to people or property resulting from any ideas, methods, instructions or products referred to in the content.
==== Refs
References

1. Shahid M. Ahmed A. Zhibo P. Ammar R. Fung T.K. Jonathan R. Massive Internet of Things for Industrial Applications: Addressing Wireless IoT Connectivity Challenges and Ecosystem Fragmentation IEEE Ind. Electron. Mag. 2017 11 28 33
2. Luca L. Filippo B. Gaetano P. Lo B.L. Industrial LoRa: A Novel Medium Access Strategy for LoRa in Industry 4.0 Applications Proceedings of the IECON 2018—44th Annual Conference of the IEEE Industrial Electronics Society Washington, DC, USA 21–23 October 2018 4141 4146
3. Premsankar G. Ghaddar B. Slabicki M. Francesco M.D. Optimal Configuration of LoRa Networks in Smart Cities IEEE Trans. Ind. Inform. 2020 16 7243 7254 10.1109/TII.2020.2967123
4. Raza U. Kulkami P. Sooriyabandara M. Low Power Wide Area Networks: An Overview IEEE Commun. Surv. Tutor. 2017 19 855 873 10.1109/COMST.2017.2652320
5. Kleinrock L. Tobagi F. Packet Switching in Radio Channels: Part I - Carrier Sense Multiple-Access Modes and Their Throughput-Delay Characteristics IEEE Trans. Commun. 1975 23 1400 1416 10.1109/TCOM.1975.1092768
6. Kim T.H. Ni J. Srikant R. Vaidya N.H. Throughput-Optimal CSMA With Imperfect Carrier Sensing IEEE/ACM Trans. Netw. 2013 21 1636 1650 10.1109/TNET.2012.2233495
7. IEEE Std 802.11-2016 (Revision of IEEE Std 802.11-2012) IEEE Standard for Information Technology—Telecommunications and Information Exchange between Systems Local and Metropolitan Area Networks—Specific Requirements—Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) Specifications IEEE Piscataway Township, NJ, USA 2016 1 3534
8. Kay S.M. Fundamentals of Statistical Signal Processing: Detection Theory Prentice Hall Englewood Cliffs, NJ, USA 1998
9. Urkowitz H. Energy Detection of Unknown Deterministic Signals Proc. IEEE 1967 55 523 531 10.1109/PROC.1967.5573
10. Gardner W. Exploitation of Spectral Redundancy in Cyclostationary Signals IEEE Signal Process. Mag. 1991 8 14 36 10.1109/79.81007
11. ARIB STD-T108 920MHz-Band Telemeter, Telecontrol and Data Transmission Radio Equipment v. 1.2 Association of Radio Industiries and Businesses Chiyoda, Japan 2018 (In Japanese)
12. Narieda S. Fujii T. Energy Detection Based Carrier Sense in LPWAN IEEE Access 2023 11 79105 79119 10.1109/ACCESS.2023.3299219
13. Ju Y. Cao Z. Chen Y. Liu L. Pei Q. Mumtaz S. Dong M. Guizani M. NOMA-Assisted Secure Offloading for Vehicular Edge Computing Networks With Asynchronous Deep Reinforcement Learning IEEE Trans. Intell. Transp. Syst. 2024 25 2627 2640 10.1109/TITS.2023.3320861
14. Rallis K.G. Papanikolaou V.K. Diamantoulakis P.D. Tegos S.A. Dowhuszko A.A. Khalighi M.A. Karagiannidis G.K. Energy Efficient Cooperative Communications in Aggregated VLC/RF Networks With NOMA IEEE Trans. Commun. 2023 71 5408 5419 10.1109/TCOMM.2023.3292486
15. Zorbas D. O’Flynn B. Autonomous Collision-Free Scheduling for LoRa-Based Industrial Internet of Things Proceedings of the 2019 IEEE 20th International Symposium on “A World of Wireless, Mobile and Multimedia Networks” (WoWMoM) Washington, DC, USA 10–12 June 2019 1 5
16. Zorbas D. Abdelfadeel K. Lotzanikolaou P. Pesch D. TS-LoRa: Time-Slotted LoRaWAN for the Industrial Internet of Things Comput. Commun. 2020 153 1 10 10.1016/j.comcom.2020.01.056
17. Alahmadi H. Bouabdallah F. Al-Dubai A. Ghaleb B. A Novel Autonomous Time-Slotted LoRa MAC Protocol with Adaptive Frame Sizes Proceedings of the 2023 International Wireless Communications and Mobile Computing (IWCMC) Marrakesh, Morocco 19–23 June 2023 917 922
18. Alahmadi H. Bouabdallah F. Al-Dubai A. A Novel Time-Slotted LoRa MAC Protocol for Scalable IoT Networks Future Gener. Comput. Syst. 2022 134 287 302 10.1016/j.future.2022.04.003
19. LoRa Alliance Available online: https://lora-alliance.org/ (accessed on 17 March 2022)
20. Finnegan J. Farrell R. Brown S. Analysis and Enhancement of the LoRaWAN Adaptive Data Rate Scheme IEEE Internet Things J. 2020 7 7171 7180 10.1109/JIOT.2020.2982745
21. Marini R. Cerroni W. Buratti C. A Novel Collision-Aware Adaptive Data Rate Algorithm for LoRaWAN Networks IEEE Internet Things J. 2021 8 2670 2680 10.1109/JIOT.2020.3020189
22. Garlisi D. Tinnirello I. Bianchi G. Cuomo F. Capture Aware Sequential Waterfilling for LoRaWAN Adaptive Data Rate IEEE Trans. Wirel. Commun. 2021 20 2019 2033 10.1109/TWC.2020.3038638
23. Samejima K. Okumura R. Mizutani K. Harada H. Evaluation of CSL-based Low Power MAC Protocol for Wireless Smart Metering Networks Proceedings of the 2020 IEEE 17th Annual Consumer Communications and Networking Conference (CCNC) Las Vegas, NV, USA 10–13 January 2020 1 6
24. Available online: https://www.semtech.com/products/wireless-rf/lora-transceivers/sx1276 (accessed on 17 March 2022)
25. Pollin S. Ergen M. Ergen S.C. Bougard B. Der Perre L.V. Moerman I. Bahai A. Varaiya P. Catthoor F. Performance Analysis of Slotted Carrier Sense IEEE 802.15.4 Medium Access Layer IEEE Trans. Wirel. Commun. 2008 7 3359 3371 10.1109/TWC.2008.060057
26. Proakis J.G. Digital Communications 4th ed. McGraw-Hill New York, NY, USA 2001
27. Tandra R. Sahai A. SNR Walls for Signal Detection IEEE J. Sel. Top. Signal Process. 2008 2 4 17 10.1109/JSTSP.2007.914879
28. Mariani A. Giorgetti A. Chiani M. Effects of Noise Power Estimation on Energy Detection for Cognitive Radio Applications IEEE Trans. Commun. 2011 59 3410 3420 10.1109/TCOMM.2011.102011.100708
29. Narieda S. Fujii T. On Execution at End Devices for Energy Detection Based Carrier Sense in LPWAN Proceedings of the 2024 IEEE 21th Annual Consumer Communications and Networking Conference (CCNC) Las Vegas, NV, USA 6–9 January 2024 920 923
30. Tsuchiya H. Mikami M. Kurono M. A Study of the Propagation Channel Modeling for Smart Meter Communications—Measurement and Evaluation of the Propagation Path Loss in a Residential, an Urban and a Suburban Area Central Research Institute of Electric Power Industry (CRIEPI) Tokyo, Japan 2012 Volume R11031 1 28
